<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>OPAC</title><script src="https://cdn.tailwindcss.com"></script><script type="module" src="./js/supabase.js"></script><script type="module">
import { supabase } from './js/supabase.js'
async function load(){ const { data } = await supabase.from('books').select('title,author,available_copies,total_copies,libraries(school_name)').neq('available_copies',0); const div=document.getElementById('list'); div.innerHTML=''; data.forEach(b=>{ const card=document.createElement('div'); card.className='bg-white p-4 rounded shadow mb-4'; card.innerHTML=`<h3 class="font-bold">${b.title}</h3><p>${b.author} â€” ${b.libraries.school_name}</p><p class="text-green-600">Available: ${b.available_copies}/${b.total_copies}</p>`; div.appendChild(card) })}
load()
document.getElementById('search').oninput=async(e)=>{ const q=e.target.value; const { data } = await supabase.from('books').select('title,author,available_copies,total_copies,libraries(school_name)').ilike('title','%'+q+'%'); /* same render */ }
</script></head><body class="bg-gray-50 min-h-screen p-6"><h1 class="text-4xl font-bold text-center mb-8">Public Book Catalog (OPAC)</h1><input id="search" placeholder="Search by title..." class="w-full max-w-xl mx-auto p-3 border rounded mb-6"><div id="list" class="max-w-4xl mx-auto grid md:grid-cols-3 gap-6"></div></body></html>
